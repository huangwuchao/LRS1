<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" type="text/css" href="../css/login.css" />
    </head>
    <body>
        <div id="box">
            <h3>后台管理系统</h3>
            <input type="text" placeholder="请输入用户名" id="user" />
            <input type="text" placeholder="请输入密码" id="psw" />
            <input type="text" placeholder="验证码" id="check" />
            <i class="i1"></i>
            <div class="row">
                <div class="col-md-offset-4 col-md-4">
                    <div id="mpanel2">  
                        <span class="inf2"></span>   
                    </div>
                </div>
            </div>
            <input type="checkbox" id="rem" /><span class="rem">记住密码</span><a href="javascript:;" class="forg">忘记密码?</a>
            <input type="button" id="loginBtn" value="登录" />
            <p class="inf1"></p>
        </div>
    </body>
    <script type="text/javascript" src="../js/jquery-1.10.1.min.js"></script>
    <script type="text/javascript" src="../js/verify.js"></script>
    <script type="text/javascript">
        $(()=>{
            $('#loginBtn').click(()=>{
                if($('#user').val()&&$('#psw').val()&&$('#check').val()){
                    let val2='';
                    for(let i=0;i<4;i++){
                        let sum=$('.s2 font').eq(i).html();
                        val2+=sum;
                    }
                    console.log(val2);
                    if($('#check').val()==val2){
                        let user=$('#user').val();
                        let psw=$('#psw').val();
                        $.ajax({
                            type:"post",//请求方式
                            url:"/login",//接口路径
                            async:true,//异步
                            data:{//传输数据
                                'username':user,
                                'password':psw
                            },
                            success:function(str){//成功回调
                                console.log(str);
                                if(str.code==1){
                                    location.href='../index.html';
                                }else{
                                    $('.inf1').html('您输入的用户名或密码错误');
                                }
                            }
                        });
                    }else{
                        $('.inf1').html('您输入的验证码错误');
                    }
                }else{
                    $('.inf1').html('以上各项不能为空');
                }
            });
        });
    </script>
</html>